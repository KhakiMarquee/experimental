import{p as Z,_ as G}from"./ui-Bx09MWB8.js";function S(e,o){e.classList.add("expanding"),window.p5Instance&&window.p5Instance.noLoop();const a=e.getBoundingClientRect(),s=a.top+window.scrollY,n=a.left+window.scrollX,u=a.width,c=a.height;e.parentElement,e.nextSibling,e.style.transition="none",e.style.position="fixed",e.style.top=`${s}px`,e.style.left=`${n}px`,e.style.width=`${u}px`,e.style.height=`${c}px`,e.style.margin="0",e.style.transform="none",e.style.zIndex="10000",e.style.willChange="top,left,width,height,transform",document.body.appendChild(e),e.getBoundingClientRect();const l=600;e.style.transition=`top ${l}ms ease, left ${l}ms ease, width ${l}ms ease, height ${l}ms ease, transform ${l}ms ease`,e.style.top="0px",e.style.left="0px",e.style.width="100vw",e.style.height="100vh",e.classList.add("fullscreen");const m=v=>{v.target===e&&e.classList.contains("fullscreen")&&(e.removeEventListener("transitionend",m),e.style.willChange="",I(o))};e.addEventListener("transitionend",m),setTimeout(()=>{document.body.contains(e)&&I(o)},l+50)}function I(e){document.body.innerHTML=`
    <div id="detail-app" style="min-height:100vh; display:flex; flex-direction:column; padding:24px; box-sizing:border-box;">
      <button id="close-detail" aria-label="Close" style="align-self:flex-end; font-size:1.25rem; background:none; border:none; cursor:pointer;">âœ•</button>
      <main style="max-width:960px; width:100%; margin:0 auto;">
        <h1 style="margin:0 0 12px 0;">${e.title}</h1>
        <p style="margin:0 0 8px 0;"><strong>Material:</strong> ${e.material??""}</p>
        <p style="margin:0 0 16px 0;">${e.description??""}</p>
        ${e.image?`<img src="${e.image}" alt="${e.title}" style="max-width:100%; height:auto; display:block;">`:""}
      </main>
    </div>
  `,document.getElementById("close-detail").addEventListener("click",()=>{location.reload()})}const J=Object.freeze(Object.defineProperty({__proto__:null,openDetail:S},Symbol.toStringTag,{value:"Module"})),K=()=>("ontouchstart"in window||navigator.maxTouchPoints>0)&&window.innerWidth<=768;document.addEventListener("DOMContentLoaded",()=>{console.log("Fetching:","data/stone.json"),fetch("/data/stone.json").then(e=>e.json()).then(e=>{window.stoneData=e,console.log("[stoneData] loaded",Array.isArray(window.stoneData),window.stoneData?.length);const o=document.querySelector("#carousel");if(!o){console.error("Carousel element not found");return}o.innerHTML="",e.forEach(a=>{const s=document.createElement("div");s.classList.add("slide");const n=document.createElement("div");n.classList.add("slide-inner");const u=document.createElement("img");u.src=a.image||"",u.alt=a.title||"";const c=document.createElement("p");c.textContent=a.title||"";const l=document.createElement("span");l.classList.add("tooltip"),l.title="[TAP]",n.appendChild(u),n.appendChild(c),s.appendChild(n),s.appendChild(l),o.appendChild(s),K()?setupSingleeTap(s,a):s.addEventListener("click",()=>S(s,a))})}).catch(e=>{console.error("Error loading stone data:",e)})});function Q(e){let o,a=[],s=0,n=0;const u=900;let c=!1;const l=100;let m=0,v=0,E=!1;const A=8;let D=0,T=0,x=!1,b=!1;e.setup=function(){e.noCanvas(),o=document.getElementById("carousel"),a=Array.from(document.querySelectorAll(".slide"));const t=document.getElementById("carousel-container");t.style.perspective="2000px",o.style.transformStyle="preserve-3d",O()?W():q(),e.loop()},e.draw=function(){o.style.transform="rotateX(-15deg) rotateY(-30deg)";const i=a.length*u;s=(s+n)%i,s<0&&(s+=i);const f=s/i,d=document.querySelector(".progress-dot");d&&(d.style.backgroundColor=f>=.8?"var(--grey-800)":"rgba(var(--grey-100), 0.4)"),a.forEach((h,V)=>{let w=(V*u-s)%i;w<-u*2&&(w+=i);let X=w-i,_=w+i,p=w;const L=window.innerWidth/2;Math.abs(X-L)<Math.abs(p-L)&&(p=X),Math.abs(_-L)<Math.abs(p-L)&&(p=_);const F=p,N=p*-.5,U=-Math.abs(p)*.2;!h.classList.contains("expanding")&&!h.classList.contains("fullscreen")&&(h.style.transform=`
          translateX(${Math.round(F*100)/100}px)
          translateY(${Math.round(N*100)/100}px)
          translateZ(${Math.round(U*100)/100}px)
        `)});const g=Math.abs(n);let y;if(g>25)y=.88;else if(g>10){const h=(g-10)/15;y=.92+(.88-.92)*h*h*(3-2*h)}else if(g>2)y=.92;else if(g>.5){const h=(g-.5)/1.5;y=.94+(.92-.94)*h}else y=.94;n*=y,Math.abs(n)<.005&&(n=0)};function O(){return("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768}function q(){const t=document.getElementById("carousel-container");if(!t)return;t.addEventListener("wheel",k,{passive:!1}),t.addEventListener("mousedown",Y),t.addEventListener("mouseup",B),t.addEventListener("mousemove",j);const r=document.querySelector("footer, .footer"),i=document.querySelector("header, .header, .site-header");[r,i].forEach(f=>{f&&(f.addEventListener("wheel",d=>{d.stopPropagation(),d.preventDefault()},{passive:!1}),f.addEventListener("mousedown",d=>d.stopPropagation()),f.addEventListener("mousemove",d=>d.stopPropagation()))}),e.mouseWheel=()=>!1,e.mousePressed=()=>!1,e.mouseReleased=()=>!1,e.mouseDragged=()=>!1}function k(t){t.preventDefault();let r=-t.deltaY/8;r=Math.max(-8,Math.min(8,r));const i=n+r;n+=(i-n)*.6,n=Math.max(-l*.8,Math.min(l*.8,n))}function Y(t){t.preventDefault(),c=!0,v=t.clientX}function B(t){t.preventDefault(),c=!1}function j(t){if(!c)return;t.preventDefault();let r=t.clientX-v,i=Math.max(-15,Math.min(15,r*-1.2));n+=(i-n)*.7,n=Math.max(-l*.8,Math.min(l*.8,n)),v=t.clientX}function W(){const t=document.getElementById("carousel-container");t&&(t.addEventListener("touchstart",H,{passive:!1}),t.addEventListener("touchmove",R,{passive:!1}),t.addEventListener("touchend",z,{passive:!1}))}function H(t){t.target.closest("header, .header, .site-header, footer, .footer")||(c=!0,E=!0,x=!1,m=D=t.touches[0].clientX,T=t.touches[0].clientY,n=0,b=!0,setTimeout(()=>b=!1,400),t.preventDefault())}function R(t){if(!E||t.touches.length!==1)return;const r=t.touches[0].clientX,i=r-m;Math.hypot(r-D,t.touches[0].clientY-T)>A&&(x=!0);let f=Math.max(-50,Math.min(50,-i*1.5));n+=(f-n)*.7,m=r,t.preventDefault()}function z(t){if(E){if(!x){const r=t.target.closest(".slide");if(r)if(r.classList.contains("fullscreen"))r.classList.remove("fullscreen");else{const i=[...a].indexOf(r),f=window.stoneData?.[i];f&&G(async()=>{const{openDetail:d}=await Promise.resolve().then(()=>J);return{openDetail:d}},void 0).then(({openDetail:d})=>d(r,f))}}c=!1,E=!1}}const $=t=>{if(t.target.closest("header, .header, .site-header, footer, .footer"))return;const r=document.querySelector(".slide.fullscreen");r&&!t.target.closest(".slide.fullscreen")&&r.classList.remove("fullscreen")};document.addEventListener("touchstart",$,{passive:!0}),document.addEventListener("click",t=>{b||$(t)},{passive:!0})}function P(){document.querySelectorAll("#carousel .slide").length>0?window.p5Instance=new Z(Q):setTimeout(P,50)}document.addEventListener("DOMContentLoaded",P);let M=[];function C(e){const o=document.querySelector("#carousel");o&&(o.innerHTML="",e.forEach(a=>{const s=document.createElement("div");s.classList.add("slide");const n=document.createElement("div");if(n.classList.add("slide-inner"),a.image){const l=document.createElement("img");l.src=a.image,l.alt=a.title||"",n.appendChild(l)}const u=document.createElement("p");u.textContent=a.title||"",n.appendChild(u);const c=document.createElement("span");c.classList.add("tooltip"),c.title="[tap]",s.appendChild(n),s.appendChild(c),o.appendChild(s),s.addEventListener("click",()=>{S(s,a)})}))}document.addEventListener("DOMContentLoaded",()=>{fetch("/data/stone.json").then(o=>o.json()).then(o=>{M=o,C(M)}).catch(o=>console.error("Error loading stone data:",o)),document.querySelectorAll('#category-buttons button:not([data-category="filter"])').forEach(o=>{o.addEventListener("click",()=>{const a=o.dataset.category;if(a==="all")C(M);else{const s=M.filter(n=>n.category===a);C(s)}})})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector('#category-buttons button[data-category="filter"]'),o=document.querySelector("#category-buttons");!e||!o||e.addEventListener("click",()=>{o.classList.toggle("show-buttons")})});
