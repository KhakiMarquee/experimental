import{p as N,_ as U}from"./ui-BnT9v67C.js";function D(e,o){e.classList.add("expanding"),window.p5Instance&&window.p5Instance.noLoop();const r=e.getBoundingClientRect(),s=r.top+window.scrollY,t=r.left+window.scrollX,h=r.width,c=r.height;e.parentElement,e.nextSibling,e.style.transition="none",e.style.position="fixed",e.style.top=`${s}px`,e.style.left=`${t}px`,e.style.width=`${h}px`,e.style.height=`${c}px`,e.style.margin="0",e.style.transform="none",e.style.zIndex="10000",e.style.willChange="top,left,width,height,transform",document.body.appendChild(e),e.getBoundingClientRect();const l=600;e.style.transition=`top ${l}ms ease, left ${l}ms ease, width ${l}ms ease, height ${l}ms ease, transform ${l}ms ease`,e.style.top="0px",e.style.left="0px",e.style.width="100vw",e.style.height="100vh",e.classList.add("fullscreen");const v=M=>{M.target===e&&e.classList.contains("fullscreen")&&(e.removeEventListener("transitionend",v),e.style.willChange="",I(o))};e.addEventListener("transitionend",v),setTimeout(()=>{document.body.contains(e)&&I(o)},l+50)}function I(e){document.body.innerHTML=`
    <div id="detail-app" style="min-height:100vh; display:flex; flex-direction:column; padding:24px; box-sizing:border-box;">
      <button id="close-detail" aria-label="Close" style="align-self:flex-end; font-size:1.25rem; background:none; border:none; cursor:pointer;">âœ•</button>
      <main style="max-width:960px; width:100%; margin:0 auto;">
        <h1 style="margin:0 0 12px 0;">${e.title}</h1>
        <p style="margin:0 0 8px 0;"><strong>Material:</strong> ${e.material??""}</p>
        <p style="margin:0 0 16px 0;">${e.description??""}</p>
        ${e.image?`<img src="${e.image}" alt="${e.title}" style="max-width:100%; height:auto; display:block;">`:""}
      </main>
    </div>
  `,document.getElementById("close-detail").addEventListener("click",()=>{location.reload()})}const V=Object.freeze(Object.defineProperty({__proto__:null,openDetail:D},Symbol.toStringTag,{value:"Module"}));document.addEventListener("DOMContentLoaded",()=>{console.log("Fetching:","data/stone.json"),fetch("/data/stone.json").then(e=>e.json()).then(e=>{const o=document.querySelector("#carousel");if(!o){console.error("Carousel element not found");return}o.innerHTML="",e.forEach(r=>{const s=document.createElement("div");s.classList.add("slide");const t=document.createElement("div");t.classList.add("slide-inner");const h=document.createElement("img");h.src=r.image||"",h.alt=r.title||"";const c=document.createElement("p");c.textContent=r.title||"";const l=document.createElement("span");l.classList.add("tooltip"),l.title="[TAP]",t.appendChild(h),t.appendChild(c),s.appendChild(t),s.appendChild(l),o.appendChild(s),s.addEventListener("click",()=>{D(s,r)})})}).catch(e=>{console.error("Error loading stone data:",e)})});function G(e){let o,r=[],s=0,t=0;const h=900;let c=!1;const l=100;let v=0;e.setup=function(){e.noCanvas(),o=document.getElementById("carousel"),r=Array.from(document.querySelectorAll(".slide"));const d=document.getElementById("carousel-container");d.style.perspective="2000px",o.style.transformStyle="preserve-3d",M()?k():_(),e.loop()},e.draw=function(){o.style.transform="rotateX(-15deg) rotateY(-30deg)";const a=r.length*h;s+=t,s=s%a,s<0&&(s+=a);const p=s/a,f=document.querySelector(".progress-dot");f&&(p>=.8?f.style.backgroundColor="var(--grey-800)":f.style.backgroundColor="rgba(var(--grey-100), 0.4)"),r.forEach((u,L)=>{let g=(L*h-s)%a;g<-h*2&&(g+=a);let $=g-a,X=g+a,E=g;const b=window.innerWidth/2;Math.abs($-b)<Math.abs(E-b)&&(E=$),Math.abs(X-b)<Math.abs(E-b)&&(E=X);const W=E,R=E*-.5,z=-Math.abs(E)*.2,H=Math.round(W*100)/100,F=Math.round(R*100)/100,Z=Math.round(z*100)/100;u.classList.contains("expanding")||u.classList.contains("fullscreen")||(u.style.transform=`
        translateX(${H}px)
        translateY(${F}px)
        translateZ(${Z}px)
      `)});const y=Math.abs(t);let m;if(y>25)m=.88;else if(y>10){const u=(y-10)/15,L=u*u*(3-2*u);m=.92+(.88-.92)*L}else if(y>2)m=.92;else if(y>.5){const u=(y-.5)/1.5;m=.94+(.92-.94)*u}else m=.94;t*=m,Math.abs(t)<.005&&(t=0)};function M(){return("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768}function _(){const n=document.querySelector("footer, .footer"),d=document.querySelector("header, .header, .site-header"),i=document.getElementById("carousel-container");i&&(i.addEventListener("mouseenter",()=>{c=!1}),i.addEventListener("mouseleave",()=>{c=!1,t*=.7}),i.addEventListener("wheel",B,{passive:!1}),i.addEventListener("mousedown",O),i.addEventListener("mouseup",Y),i.addEventListener("mousemove",j)),[n,d].forEach(a=>{a&&(a.addEventListener("wheel",p=>{p.stopPropagation(),p.preventDefault()},{passive:!1}),a.addEventListener("mousedown",p=>{p.stopPropagation()}),a.addEventListener("mousemove",p=>{p.stopPropagation()}))})}function k(){const n=document.getElementById("carousel-container");n&&(n.addEventListener("touchstart",q,{passive:!1}),n.addEventListener("touchmove",A,{passive:!1}),n.addEventListener("touchend",T),n.addEventListener("touchcancel",T));let d=0;const i=300;let a=0;r.forEach((f,y)=>{f.addEventListener("touchstart",m=>{a=0},{passive:!0}),f.addEventListener("touchmove",m=>{const u=m.touches[0];a+=Math.abs(u.clientX-v)},{passive:!0}),f.addEventListener("touchend",m=>{const u=Date.now(),L=u-d;a<5&&L<i&&U(async()=>{const{openDetail:g}=await Promise.resolve().then(()=>V);return{openDetail:g}},void 0).then(({openDetail:g})=>{g(f,p(y))}),a<5&&(d=u)})});function p(f){return window.stoneData?window.stoneData[f]:null}}let w=!1;function q(n){n.touches.length===1&&(c=!0,w=!0,v=n.touches[0].clientX,t=0)}function A(n){if(!w||n.touches.length!==1)return;const d=n.touches[0].clientX;let a=(d-v)*-1.5;const p=50;a=Math.max(-p,Math.min(p,a)),t+=(a-t)*.7,v=d}function T(n){w&&(c=!1,w=!1)}let C=0;function B(n){n.preventDefault(),n.stopPropagation();let d=-n.deltaY/8;const i=8;d=Math.max(-i,Math.min(i,d));const a=t+d;t=t+(a-t)*.6,t=Math.max(-l*.8,Math.min(l*.8,t))}function O(n){n.preventDefault(),n.stopPropagation(),c=!0,C=n.clientX}function Y(n){n.preventDefault(),n.stopPropagation(),c=!1}function j(n){if(c){n.preventDefault(),n.stopPropagation();let i=(n.clientX-C)*-1.2;const a=15;i=Math.max(-a,Math.min(a,i)),t=t+(i-t)*.7,t=Math.max(-l*.8,Math.min(l*.8,t)),C=n.clientX}}e.mouseWheel=function(n){return!1},e.mousePressed=function(){return!1},e.mouseReleased=function(){return!1},e.mouseDragged=function(){return!1}}function P(){document.querySelectorAll("#carousel .slide").length>0?window.p5Instance=new N(G):setTimeout(P,50)}document.addEventListener("DOMContentLoaded",P);let x=[];function S(e){const o=document.querySelector("#carousel");o&&(o.innerHTML="",e.forEach(r=>{const s=document.createElement("div");s.classList.add("slide");const t=document.createElement("div");if(t.classList.add("slide-inner"),r.image){const l=document.createElement("img");l.src=r.image,l.alt=r.title||"",t.appendChild(l)}const h=document.createElement("p");h.textContent=r.title||"",t.appendChild(h);const c=document.createElement("span");c.classList.add("tooltip"),c.title="[tap]",s.appendChild(t),s.appendChild(c),o.appendChild(s),s.addEventListener("click",()=>{D(s,r)})}))}document.addEventListener("DOMContentLoaded",()=>{fetch("/data/stone.json").then(o=>o.json()).then(o=>{x=o,S(x)}).catch(o=>console.error("Error loading stone data:",o)),document.querySelectorAll('#category-buttons button:not([data-category="filter"])').forEach(o=>{o.addEventListener("click",()=>{const r=o.dataset.category;if(r==="all")S(x);else{const s=x.filter(t=>t.category===r);S(s)}})})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector('#category-buttons button[data-category="filter"]'),o=document.querySelector("#category-buttons");!e||!o||e.addEventListener("click",()=>{o.classList.toggle("show-buttons")})});
