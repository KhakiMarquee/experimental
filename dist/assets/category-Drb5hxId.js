import{_ as h}from"./ui-CclVHjqH.js";let p=[],l=[];function g(){return new URLSearchParams(window.location.search).get("category")}function f(c){const r=document.querySelector("#carousel");if(!r)return console.error("Carousel element not found");const a=typeof window.isMobile=="function"?window.isMobile():("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768,s=(t,e)=>{typeof window.openDetail=="function"?window.openDetail(t,e):h(async()=>{const{openDetail:n}=await import("./openDetail-GWXhpPhG.js");return{openDetail:n}},[]).then(({openDetail:n})=>{window.openDetail=n,n(t,e)}).catch(n=>console.error("Failed to load openDetail:",n))},o=(t,e)=>{if(!a){t.addEventListener("click",()=>s(t,e));return}if(typeof window.setupSingleTap=="function"){window.setupSingleTap(t,e);return}let n=0;t.addEventListener("touchend",()=>{const i=Date.now();i-n<300&&s(t,e),n=i},{passive:!0})};r.innerHTML="",c.forEach(t=>{const e=document.createElement("div");e.classList.add("slide");const n=document.createElement("div");n.classList.add("slide-inner");const i=document.createElement("img");i.src=t.image||"",i.alt=t.title||"";const u=document.createElement("p");u.textContent=t.title||"";const m=document.createElement("span");m.classList.add("tooltip"),m.title="[TAP]",n.appendChild(i),n.appendChild(u),e.appendChild(n),e.appendChild(m),r.appendChild(e),o(e,t)}),window.p5Instance?.refreshSlides&&window.p5Instance.refreshSlides()}document.addEventListener("DOMContentLoaded",()=>{fetch("/data/stone.json").then(s=>s.json()).then(s=>{p=s,f(p)}).catch(s=>console.error("Error loading stone data:",s)),document.querySelectorAll('#category-buttons button:not([data-category="filter"])').forEach(s=>{s.addEventListener("click",()=>{const o=s.dataset.category,t=o==="all"?p:p.filter(n=>n.type===o),e=document.querySelector("#carousel");e&&(t.length?f(t):e.innerHTML=`<p class="no-items">No items found for "${o}"</p>`)})});const r=document.querySelector('#category-buttons button[data-category="filter"]'),a=document.querySelector("#category-buttons");r&&a&&r.addEventListener("click",()=>a.classList.toggle("show-buttons"))});document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("category-buttons"),r=document.getElementById("carousel"),a=g();console.log("[projects.html] page loaded with category:",a),fetch("/data/data.json").then(o=>o.json()).then(o=>{if(a&&o[a]?l=o[a]:a?l=[]:l=Object.values(o).flat(),s(l),c&&l.length){const t=Array.from(new Set(l.map(e=>e.theme).filter(Boolean)));t.unshift("All"),c.innerHTML="",t.forEach(e=>{const n=document.createElement("button");n.textContent=e,n.dataset.theme=e.trim().toLowerCase(),c.appendChild(n),n.addEventListener("click",()=>{const i=n.dataset.theme==="all"?l:l.filter(u=>u.theme&&u.theme.trim().toLowerCase()===n.dataset.theme);s(i)})})}}).catch(o=>console.error("Error loading projects JSON:",o));function s(o){if(r.innerHTML="",!o.length){r.innerHTML=`<p>No projects found${a?` for "${a}"`:""}.</p>`;return}o.forEach(t=>{const e=document.createElement("div");e.classList.add("project-row"),e.addEventListener("click",()=>window.openTemplateDetail?.(e,t)),e.innerHTML=`
        <div class="project-image">
          <img src="${t.image}" alt="${t.title}">
        </div>
        <div class="project-details">
          <p>${t.title}</p>
          <span class="project-client">${t.client||""}</span>
          <div class="project-meta">
            <p class="project-theme">${t.theme||""}</p>
            <p class="project-description">${t.description||""}</p>   
            <span class="project-type">${(t.type||[]).join(", ")}</span>
          </div>
        </div>
      `,r.appendChild(e)})}});const d=document.querySelector("#category-buttons"),w=d.querySelector('button[data-category="filter"]');document.addEventListener("click",c=>{d.classList.contains("show-buttons")&&!d.contains(c.target)&&!w.contains(c.target)&&d.classList.remove("show-buttons")});window.addEventListener("scroll",()=>{d.classList.contains("show-buttons")&&d.classList.remove("show-buttons")});
