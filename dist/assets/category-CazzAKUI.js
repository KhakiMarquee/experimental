import{_ as f}from"./ui-B99QvHqM.js";let p=[],i=[];function h(){return new URLSearchParams(window.location.search).get("category")}function m(l){const s=document.querySelector("#carousel");if(!s)return console.error("Carousel element not found");const c=typeof window.isMobile=="function"?window.isMobile():("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768,a=(e,t)=>{typeof window.openDetail=="function"?window.openDetail(e,t):f(async()=>{const{openDetail:n}=await import("./openDetail-HqcpuDi0.js");return{openDetail:n}},[]).then(({openDetail:n})=>{window.openDetail=n,n(e,t)}).catch(n=>console.error("Failed to load openDetail:",n))},o=(e,t)=>{if(!c){e.addEventListener("click",()=>a(e,t));return}if(typeof window.setupSingleTap=="function"){window.setupSingleTap(e,t);return}let n=0;e.addEventListener("touchend",()=>{const r=Date.now();r-n<300&&a(e,t),n=r},{passive:!0})};s.innerHTML="",l.forEach(e=>{const t=document.createElement("div");t.classList.add("slide");const n=document.createElement("div");n.classList.add("slide-inner");const r=document.createElement("img");r.src=e.image||"",r.alt=e.title||"";const d=document.createElement("p");d.textContent=e.title||"";const u=document.createElement("span");u.classList.add("tooltip"),u.title="[TAP]",n.appendChild(r),n.appendChild(d),t.appendChild(n),t.appendChild(u),s.appendChild(t),o(t,e)}),window.p5Instance?.refreshSlides&&window.p5Instance.refreshSlides()}document.addEventListener("DOMContentLoaded",()=>{fetch("/data/stone.json").then(a=>a.json()).then(a=>{p=a,m(p)}).catch(a=>console.error("Error loading stone data:",a)),document.querySelectorAll('#category-buttons button:not([data-category="filter"])').forEach(a=>{a.addEventListener("click",()=>{const o=a.dataset.category,e=o==="all"?p:p.filter(n=>n.type===o),t=document.querySelector("#carousel");t&&(e.length?m(e):t.innerHTML=`<p class="no-items">No items found for "${o}"</p>`)})});const s=document.querySelector('#category-buttons button[data-category="filter"]'),c=document.querySelector("#category-buttons");s&&c&&s.addEventListener("click",()=>c.classList.toggle("show-buttons"))});document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("theme-buttons"),s=document.getElementById("content"),c=h();fetch("/data/data.json").then(o=>o.json()).then(o=>{if(c&&o[c]?i=o[c]:c?i=[]:i=Object.values(o).flat(),a(i),l&&i.length){const e=Array.from(new Set(i.map(t=>t.theme).filter(Boolean)));e.unshift("All"),l.innerHTML="",e.forEach(t=>{const n=document.createElement("button");n.textContent=t,n.dataset.theme=t.trim().toLowerCase(),l.appendChild(n),n.addEventListener("click",()=>{const r=n.dataset.theme==="all"?i:i.filter(d=>d.theme&&d.theme.trim().toLowerCase()===n.dataset.theme);a(r)})})}}).catch(o=>console.error("Error loading projects JSON:",o));function a(o){if(s.innerHTML="",!o.length){s.innerHTML=`<p>No projects found${c?` for "${c}"`:""}.</p>`;return}o.forEach(e=>{const t=document.createElement("div");t.classList.add("project-row"),t.addEventListener("click",()=>window.openTemplateDetail?.(t,e)),t.innerHTML=`
        <div class="project-image">
          <img src="${e.image}" alt="${e.title}">
        </div>
        <div class="project-details">
          <p>${e.title}</p>
          <span class="project-client">${e.client||""}</span>
          <div class="project-meta">
            <p class="project-theme">${e.theme||""}</p>
            <p class="project-description">${e.description||""}</p>   
            <span class="project-type">${(e.type||[]).join(", ")}</span>
          </div>
        </div>
      `,s.appendChild(t)})}});
