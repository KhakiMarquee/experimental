import{p as U}from"./ui-CTue3Ljv.js";function I(e,o){e.classList.add("expanding"),window.p5Instance&&window.p5Instance.noLoop();const s=e.getBoundingClientRect(),a=s.top+window.scrollY,n=s.left+window.scrollX,d=s.width,i=s.height;e.parentElement,e.nextSibling,e.style.transition="none",e.style.position="fixed",e.style.top=`${a}px`,e.style.left=`${n}px`,e.style.width=`${d}px`,e.style.height=`${i}px`,e.style.margin="0",e.style.transform="none",e.style.zIndex="10000",e.style.willChange="top,left,width,height,transform",document.body.appendChild(e),e.getBoundingClientRect();const l=600;e.style.transition=`top ${l}ms ease, left ${l}ms ease, width ${l}ms ease, height ${l}ms ease, transform ${l}ms ease`,e.style.top="0px",e.style.left="0px",e.style.width="100vw",e.style.height="100vh",e.classList.add("fullscreen");const m=x=>{x.target===e&&e.classList.contains("fullscreen")&&(e.removeEventListener("transitionend",m),e.style.willChange="",T(o))};e.addEventListener("transitionend",m),setTimeout(()=>{document.body.contains(e)&&T(o)},l+50)}function T(e){document.body.innerHTML=`
    <div id="detail-app" style="min-height:100vh; display:flex; flex-direction:column; padding:24px; box-sizing:border-box;">
      <button id="close-detail" aria-label="Close" style="align-self:flex-end; font-size:1.25rem; background:none; border:none; cursor:pointer;">âœ•</button>
      <main style="max-width:960px; width:100%; margin:0 auto;">
        <h1 style="margin:0 0 12px 0;">${e.title}</h1>
        <p style="margin:0 0 8px 0;"><strong>Material:</strong> ${e.material??""}</p>
        <p style="margin:0 0 16px 0;">${e.description??""}</p>
        ${e.image?`<img src="${e.image}" alt="${e.title}" style="max-width:100%; height:auto; display:block;">`:""}
      </main>
    </div>
  `,document.getElementById("close-detail").addEventListener("click",()=>{location.reload()})}document.addEventListener("DOMContentLoaded",()=>{console.log("Fetching:","data/stone.json"),fetch("/data/stone.json").then(e=>e.json()).then(e=>{const o=document.querySelector("#carousel");if(!o){console.error("Carousel element not found");return}o.innerHTML="",e.forEach(s=>{const a=document.createElement("div");a.classList.add("slide");const n=document.createElement("div");n.classList.add("slide-inner");const d=document.createElement("img");d.src=s.image||"",d.alt=s.title||"";const i=document.createElement("p");i.textContent=s.title||"";const l=document.createElement("span");l.classList.add("tooltip"),l.title="[TAP]",n.appendChild(d),n.appendChild(i),a.appendChild(n),a.appendChild(l),o.appendChild(a),a.addEventListener("click",()=>{I(a,s)})})}).catch(e=>{console.error("Error loading stone data:",e)})});function V(e){let o,s=[],a=0,n=0;const d=900;let i=!1;const l=100;let m=0;e.setup=function(){e.noCanvas(),o=document.getElementById("carousel"),s=Array.from(document.querySelectorAll(".slide"));const u=document.getElementById("carousel-container");u.style.perspective="2000px",o.style.transformStyle="preserve-3d",x()?q():k(),e.loop()},e.draw=function(){o.style.transform="rotateX(-15deg) rotateY(-30deg)";const r=s.length*d;a+=n,a=a%r,a<0&&(a+=r);const p=a/r,C=document.querySelector(".progress-dot");C&&(p>=.8?C.style.backgroundColor="var(--grey-800)":C.style.backgroundColor="rgba(var(--grey-100), 0.4)"),s.forEach((h,b)=>{let E=(b*d-a)%r;E<-d*2&&(E+=r);let $=E-r,X=E+r,f=E;const L=window.innerWidth/2;Math.abs($-L)<Math.abs(f-L)&&(f=$),Math.abs(X-L)<Math.abs(f-L)&&(f=X);const H=f,R=f*-.5,z=-Math.abs(f)*.2,Z=Math.round(H*100)/100,F=Math.round(R*100)/100,N=Math.round(z*100)/100;h.classList.contains("expanding")||h.classList.contains("fullscreen")||(h.style.transform=`
        translateX(${Z}px)
        translateY(${F}px)
        translateZ(${N}px)
      `)});const g=Math.abs(n);let y;if(g>25)y=.88;else if(g>10){const h=(g-10)/15,b=h*h*(3-2*h);y=.92+(.88-.92)*b}else if(g>2)y=.92;else if(g>.5){const h=(g-.5)/1.5;y=.94+(.92-.94)*h}else y=.94;n*=y,Math.abs(n)<.005&&(n=0)};function x(){return("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768}function k(){const t=document.querySelector("footer, .footer"),u=document.querySelector("header, .header, .site-header"),c=document.getElementById("carousel-container");c&&(c.addEventListener("mouseenter",()=>{i=!1}),c.addEventListener("mouseleave",()=>{i=!1,n*=.7}),c.addEventListener("wheel",Y,{passive:!1}),c.addEventListener("mousedown",O),c.addEventListener("mouseup",W),c.addEventListener("mousemove",j)),[t,u].forEach(r=>{r&&(r.addEventListener("wheel",p=>{p.stopPropagation(),p.preventDefault()},{passive:!1}),r.addEventListener("mousedown",p=>{p.stopPropagation()}),r.addEventListener("mousemove",p=>{p.stopPropagation()}))})}function q(){const t=document.getElementById("carousel-container");t&&(t.addEventListener("touchstart",B,{passive:!1}),t.addEventListener("touchmove",A,{passive:!1}),t.addEventListener("touchend",D),t.addEventListener("touchcancel",D))}let v=!1;function B(t){t.touches.length===1&&(t.preventDefault(),i=!0,v=!0,m=t.touches[0].clientX,n=0)}function A(t){if(!v||t.touches.length!==1)return;t.preventDefault();const u=t.touches[0].clientX;let r=(u-m)*-1.5;const p=50;r=Math.max(-p,Math.min(p,r)),n=n+(r-n)*.7,m=u}function D(t){v&&(t.preventDefault(),i=!1,v=!1)}let M=0;function Y(t){t.preventDefault(),t.stopPropagation();let u=-t.deltaY/8;const c=8;u=Math.max(-c,Math.min(c,u));const r=n+u;n=n+(r-n)*.6,n=Math.max(-l*.8,Math.min(l*.8,n))}function O(t){t.preventDefault(),t.stopPropagation(),i=!0,M=t.clientX}function W(t){t.preventDefault(),t.stopPropagation(),i=!1}function j(t){if(i){t.preventDefault(),t.stopPropagation();let c=(t.clientX-M)*-1.2;const r=15;c=Math.max(-r,Math.min(r,c)),n=n+(c-n)*.7,n=Math.max(-l*.8,Math.min(l*.8,n)),M=t.clientX}}e.mouseWheel=function(t){return!1},e.mousePressed=function(){return!1},e.mouseReleased=function(){return!1},e.mouseDragged=function(){return!1}}function P(){document.querySelectorAll("#carousel .slide").length>0?window.p5Instance=new U(V):setTimeout(P,50)}document.addEventListener("DOMContentLoaded",P);let w=[];function S(e){const o=document.querySelector("#carousel");o&&(o.innerHTML="",e.forEach(s=>{const a=document.createElement("div");a.classList.add("slide");const n=document.createElement("div");if(n.classList.add("slide-inner"),s.image){const l=document.createElement("img");l.src=s.image,l.alt=s.title||"",n.appendChild(l)}const d=document.createElement("p");d.textContent=s.title||"",n.appendChild(d);const i=document.createElement("span");i.classList.add("tooltip"),i.title="[tap]",a.appendChild(n),a.appendChild(i),o.appendChild(a),a.addEventListener("click",()=>{I(a,s)})}))}document.addEventListener("DOMContentLoaded",()=>{fetch("/data/stone.json").then(o=>o.json()).then(o=>{w=o,S(w)}).catch(o=>console.error("Error loading stone data:",o)),document.querySelectorAll('#category-buttons button:not([data-category="filter"])').forEach(o=>{o.addEventListener("click",()=>{const s=o.dataset.category;if(s==="all")S(w);else{const a=w.filter(n=>n.category===s);S(a)}})})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector('#category-buttons button[data-category="filter"]'),o=document.querySelector("#category-buttons");!e||!o||e.addEventListener("click",()=>{o.classList.toggle("show-buttons")})});
