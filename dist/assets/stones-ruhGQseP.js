import{p as U}from"./ui-CTue3Ljv.js";function I(e,o){e.classList.add("expanding"),window.p5Instance&&window.p5Instance.noLoop();const s=e.getBoundingClientRect(),a=s.top+window.scrollY,t=s.left+window.scrollX,d=s.width,i=s.height;e.parentElement,e.nextSibling,e.style.transition="none",e.style.position="fixed",e.style.top=`${a}px`,e.style.left=`${t}px`,e.style.width=`${d}px`,e.style.height=`${i}px`,e.style.margin="0",e.style.transform="none",e.style.zIndex="10000",e.style.willChange="top,left,width,height,transform",document.body.appendChild(e),e.getBoundingClientRect();const l=600;e.style.transition=`top ${l}ms ease, left ${l}ms ease, width ${l}ms ease, height ${l}ms ease, transform ${l}ms ease`,e.style.top="0px",e.style.left="0px",e.style.width="100vw",e.style.height="100vh",e.classList.add("fullscreen");const m=w=>{w.target===e&&e.classList.contains("fullscreen")&&(e.removeEventListener("transitionend",m),e.style.willChange="",T(o))};e.addEventListener("transitionend",m),setTimeout(()=>{document.body.contains(e)&&T(o)},l+50)}function T(e){document.body.innerHTML=`
    <div id="detail-app" style="min-height:100vh; display:flex; flex-direction:column; padding:24px; box-sizing:border-box;">
      <button id="close-detail" aria-label="Close" style="align-self:flex-end; font-size:1.25rem; background:none; border:none; cursor:pointer;">âœ•</button>
      <main style="max-width:960px; width:100%; margin:0 auto;">
        <h1 style="margin:0 0 12px 0;">${e.title}</h1>
        <p style="margin:0 0 8px 0;"><strong>Material:</strong> ${e.material??""}</p>
        <p style="margin:0 0 16px 0;">${e.description??""}</p>
        ${e.image?`<img src="${e.image}" alt="${e.title}" style="max-width:100%; height:auto; display:block;">`:""}
      </main>
    </div>
  `,document.getElementById("close-detail").addEventListener("click",()=>{location.reload()})}document.addEventListener("DOMContentLoaded",()=>{console.log("Fetching:","data/stone.json"),fetch("/data/stone.json").then(e=>e.json()).then(e=>{const o=document.querySelector("#carousel");if(!o){console.error("Carousel element not found");return}o.innerHTML="",e.forEach(s=>{const a=document.createElement("div");a.classList.add("slide");const t=document.createElement("div");t.classList.add("slide-inner");const d=document.createElement("img");d.src=s.image||"",d.alt=s.title||"";const i=document.createElement("p");i.textContent=s.title||"";const l=document.createElement("span");l.classList.add("tooltip"),l.title="[TAP]",t.appendChild(d),t.appendChild(i),a.appendChild(t),a.appendChild(l),o.appendChild(a),a.addEventListener("click",()=>{I(a,s)})})}).catch(e=>{console.error("Error loading stone data:",e)})});function V(e){let o,s=[],a=0,t=0;const d=900;let i=!1;const l=100;let m=0;e.setup=function(){e.noCanvas(),o=document.getElementById("carousel"),s=Array.from(document.querySelectorAll(".slide"));const u=document.getElementById("carousel-container");u.style.perspective="2000px",o.style.transformStyle="preserve-3d",w()?q():k(),e.loop()},e.draw=function(){o.style.transform="rotateX(-15deg) rotateY(-30deg)";const r=s.length*d;a+=t,a=a%r,a<0&&(a+=r);const h=a/r,C=document.querySelector(".progress-dot");C&&(h>=.8?C.style.backgroundColor="var(--grey-800)":C.style.backgroundColor="rgba(var(--grey-100), 0.4)"),s.forEach((p,b)=>{let E=(b*d-a)%r;E<-d*2&&(E+=r);let $=E-r,X=E+r,f=E;const v=window.innerWidth/2;Math.abs($-v)<Math.abs(f-v)&&(f=$),Math.abs(X-v)<Math.abs(f-v)&&(f=X);const H=f,R=f*-.5,z=-Math.abs(f)*.2,Z=Math.round(H*100)/100,F=Math.round(R*100)/100,N=Math.round(z*100)/100;p.classList.contains("expanding")||p.classList.contains("fullscreen")||(p.style.transform=`
        translateX(${Z}px)
        translateY(${F}px)
        translateZ(${N}px)
      `)});const g=Math.abs(t);let y;if(g>25)y=.88;else if(g>10){const p=(g-10)/15,b=p*p*(3-2*p);y=.92+(.88-.92)*b}else if(g>2)y=.92;else if(g>.5){const p=(g-.5)/1.5;y=.94+(.92-.94)*p}else y=.94;t*=y,Math.abs(t)<.005&&(t=0)};function w(){return("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768}function k(){const n=document.querySelector("footer, .footer"),u=document.querySelector("header, .header, .site-header"),c=document.getElementById("carousel-container");c&&(c.addEventListener("mouseenter",()=>{i=!1}),c.addEventListener("mouseleave",()=>{i=!1,t*=.7}),c.addEventListener("wheel",Y,{passive:!1}),c.addEventListener("mousedown",O),c.addEventListener("mouseup",W),c.addEventListener("mousemove",j)),[n,u].forEach(r=>{r&&(r.addEventListener("wheel",h=>{h.stopPropagation(),h.preventDefault()},{passive:!1}),r.addEventListener("mousedown",h=>{h.stopPropagation()}),r.addEventListener("mousemove",h=>{h.stopPropagation()}))})}function q(){const n=document.getElementById("carousel-container");n&&(n.addEventListener("touchstart",B,{passive:!1}),n.addEventListener("touchmove",A,{passive:!1}),n.addEventListener("touchend",D),n.addEventListener("touchcancel",D))}let x=!1;function B(n){n.touches.length===1&&(i=!0,x=!0,dragDistance=0,m=n.touches[0].clientX,t=0)}function A(n){if(!x||n.touches.length!==1)return;Math.abs(dragDistance)>5&&n.preventDefault();const u=n.touches[0].clientX;let r=(u-m)*-1.5;const h=50;r=Math.max(-h,Math.min(h,r)),t=t+(r-t)*.7,m=u}function D(n){i=!1,x=!1}let M=0;function Y(n){n.preventDefault(),n.stopPropagation();let u=-n.deltaY/8;const c=8;u=Math.max(-c,Math.min(c,u));const r=t+u;t=t+(r-t)*.6,t=Math.max(-l*.8,Math.min(l*.8,t))}function O(n){n.preventDefault(),n.stopPropagation(),i=!0,M=n.clientX}function W(n){n.preventDefault(),n.stopPropagation(),i=!1}function j(n){if(i){n.preventDefault(),n.stopPropagation();let c=(n.clientX-M)*-1.2;const r=15;c=Math.max(-r,Math.min(r,c)),t=t+(c-t)*.7,t=Math.max(-l*.8,Math.min(l*.8,t)),M=n.clientX}}e.mouseWheel=function(n){return!1},e.mousePressed=function(){return!1},e.mouseReleased=function(){return!1},e.mouseDragged=function(){return!1}}function P(){document.querySelectorAll("#carousel .slide").length>0?window.p5Instance=new U(V):setTimeout(P,50)}document.addEventListener("DOMContentLoaded",P);let L=[];function S(e){const o=document.querySelector("#carousel");o&&(o.innerHTML="",e.forEach(s=>{const a=document.createElement("div");a.classList.add("slide");const t=document.createElement("div");if(t.classList.add("slide-inner"),s.image){const l=document.createElement("img");l.src=s.image,l.alt=s.title||"",t.appendChild(l)}const d=document.createElement("p");d.textContent=s.title||"",t.appendChild(d);const i=document.createElement("span");i.classList.add("tooltip"),i.title="[tap]",a.appendChild(t),a.appendChild(i),o.appendChild(a),a.addEventListener("click",()=>{I(a,s)})}))}document.addEventListener("DOMContentLoaded",()=>{fetch("/data/stone.json").then(o=>o.json()).then(o=>{L=o,S(L)}).catch(o=>console.error("Error loading stone data:",o)),document.querySelectorAll('#category-buttons button:not([data-category="filter"])').forEach(o=>{o.addEventListener("click",()=>{const s=o.dataset.category;if(s==="all")S(L);else{const a=L.filter(t=>t.category===s);S(a)}})})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector('#category-buttons button[data-category="filter"]'),o=document.querySelector("#category-buttons");!e||!o||e.addEventListener("click",()=>{o.classList.toggle("show-buttons")})});
