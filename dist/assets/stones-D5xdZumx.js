import{p as F}from"./ui-Dyf2XKDH.js";function X(e,a){e.classList.add("expanding"),window.p5Instance&&window.p5Instance.noLoop();const s=e.getBoundingClientRect(),o=s.top+window.scrollY,n=s.left+window.scrollX,u=s.width,c=s.height;e.parentElement,e.nextSibling,e.style.transition="none",e.style.position="fixed",e.style.top=`${o}px`,e.style.left=`${n}px`,e.style.width=`${u}px`,e.style.height=`${c}px`,e.style.margin="0",e.style.transform="none",e.style.zIndex="10000",e.style.willChange="top,left,width,height,transform",document.body.appendChild(e),e.getBoundingClientRect();const l=600;e.style.transition=`top ${l}ms ease, left ${l}ms ease, width ${l}ms ease, height ${l}ms ease, transform ${l}ms ease`,e.style.top="0px",e.style.left="0px",e.style.width="100vw",e.style.height="100vh",e.classList.add("fullscreen");const m=w=>{w.target===e&&e.classList.contains("fullscreen")&&(e.removeEventListener("transitionend",m),e.style.willChange="",D(a))};e.addEventListener("transitionend",m),setTimeout(()=>{document.body.contains(e)&&D(a)},l+50)}function D(e){document.body.innerHTML=`
    <div id="detail-app" style="min-height:100vh; display:flex; flex-direction:column; padding:24px; box-sizing:border-box;">
      <button id="close-detail" aria-label="Close" style="align-self:flex-end; font-size:1.25rem; background:none; border:none; cursor:pointer;">âœ•</button>
      <main style="max-width:960px; width:100%; margin:0 auto;">
        <h1 style="margin:0 0 12px 0;">${e.title}</h1>
        <p style="margin:0 0 8px 0;"><strong>Material:</strong> ${e.material??""}</p>
        <p style="margin:0 0 16px 0;">${e.description??""}</p>
        ${e.image?`<img src="${e.image}" alt="${e.title}" style="max-width:100%; height:auto; display:block;">`:""}
      </main>
    </div>
  `,document.getElementById("close-detail").addEventListener("click",()=>{location.reload()})}document.addEventListener("DOMContentLoaded",()=>{console.log("Fetching:","data/stone.json"),fetch("/data/stone.json").then(e=>e.json()).then(e=>{const a=document.querySelector("#carousel");if(!a){console.error("Carousel element not found");return}a.innerHTML="",e.forEach(s=>{const o=document.createElement("div");o.classList.add("slide");const n=document.createElement("div");n.classList.add("slide-inner");const u=document.createElement("img");u.src=s.image||"",u.alt=s.title||"";const c=document.createElement("p");c.textContent=s.title||"";const l=document.createElement("span");l.classList.add("tooltip"),l.title="[tap]",n.appendChild(u),n.appendChild(c),o.appendChild(n),o.appendChild(l),a.appendChild(o),o.addEventListener("click",()=>{X(o,s)})})}).catch(e=>{console.error("Error loading stone data:",e)})});function N(e){let a,s=[],o=0,n=0;const u=900;let c=!1;const l=100;let m=0;e.setup=function(){e.noCanvas(),a=document.getElementById("carousel"),s=Array.from(document.querySelectorAll(".slide"));const p=document.getElementById("carousel-container");p.style.perspective="2000px",a.style.transformStyle="preserve-3d",w()?P():T(),e.loop()},e.draw=function(){a.style.transform="rotateX(-15deg) rotateY(-30deg)";const r=s.length*u;o+=n,o=o%r,o<0&&(o+=r),s.forEach((h,M)=>{let y=(M*u-o)%r;y<-u*2&&(y+=r);let S=y-r,$=y+r,f=y;const v=window.innerWidth/2;Math.abs(S-v)<Math.abs(f-v)&&(f=S),Math.abs($-v)<Math.abs(f-v)&&(f=$);const j=f,O=f*-.5,H=-Math.abs(f)*.2,R=Math.round(j*100)/100,z=Math.round(O*100)/100,Z=Math.round(H*100)/100;h.classList.contains("expanding")||h.classList.contains("fullscreen")||(h.style.transform=`
        translateX(${R}px)
        translateY(${z}px)
        translateZ(${Z}px)
      `)});const i=Math.abs(n);let g;if(i>25)g=.88;else if(i>10){const h=(i-10)/15,M=h*h*(3-2*h);g=.92+(.88-.92)*M}else if(i>2)g=.92;else if(i>.5){const h=(i-.5)/1.5;g=.94+(.92-.94)*h}else g=.94;n*=g,Math.abs(n)<.005&&(n=0)};function w(){return("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768}function T(){const t=document.querySelector("footer, .footer"),p=document.querySelector("header, .header, .site-header"),d=document.getElementById("carousel-container");d&&(d.addEventListener("mouseenter",()=>{c=!1}),d.addEventListener("mouseleave",()=>{c=!1,n*=.7}),d.addEventListener("wheel",q,{passive:!1}),d.addEventListener("mousedown",A),d.addEventListener("mouseup",B),d.addEventListener("mousemove",W)),[t,p].forEach(r=>{r&&(r.addEventListener("wheel",i=>{i.stopPropagation(),i.preventDefault()},{passive:!1}),r.addEventListener("mousedown",i=>{i.stopPropagation()}),r.addEventListener("mousemove",i=>{i.stopPropagation()}))})}function P(){const t=document.getElementById("carousel-container");t&&(t.addEventListener("touchstart",Y,{passive:!1}),t.addEventListener("touchmove",k,{passive:!1}),t.addEventListener("touchend",b),t.addEventListener("touchcancel",b))}let E=!1;function Y(t){t.touches.length===1&&(t.preventDefault(),c=!0,E=!0,m=t.touches[0].clientX,n=0)}function k(t){if(!E||t.touches.length!==1)return;t.preventDefault();const p=t.touches[0].clientX;let r=(p-m)*-1.5;const i=50;r=Math.max(-i,Math.min(i,r)),n=n+(r-n)*.7,m=p}function b(t){E&&(t.preventDefault(),c=!1,E=!1)}let x=0;function q(t){t.preventDefault(),t.stopPropagation();let p=-t.deltaY/8;const d=8;p=Math.max(-d,Math.min(d,p));const r=n+p;n=n+(r-n)*.6,n=Math.max(-l*.8,Math.min(l*.8,n))}function A(t){t.preventDefault(),t.stopPropagation(),c=!0,x=t.clientX}function B(t){t.preventDefault(),t.stopPropagation(),c=!1}function W(t){if(c){t.preventDefault(),t.stopPropagation();let d=(t.clientX-x)*-1.2;const r=15;d=Math.max(-r,Math.min(r,d)),n=n+(d-n)*.7,n=Math.max(-l*.8,Math.min(l*.8,n)),x=t.clientX}}e.mouseWheel=function(t){return!1},e.mousePressed=function(){return!1},e.mouseReleased=function(){return!1},e.mouseDragged=function(){return!1}}function I(){document.querySelectorAll("#carousel .slide").length>0?window.p5Instance=new F(N):setTimeout(I,50)}document.addEventListener("DOMContentLoaded",I);let L=[];function C(e){const a=document.querySelector("#carousel");a&&(a.innerHTML="",e.forEach(s=>{const o=document.createElement("div");o.classList.add("slide");const n=document.createElement("div");if(n.classList.add("slide-inner"),s.image){const l=document.createElement("img");l.src=s.image,l.alt=s.title||"",n.appendChild(l)}const u=document.createElement("p");u.textContent=s.title||"",n.appendChild(u);const c=document.createElement("span");c.classList.add("tooltip"),c.title="[more]",o.appendChild(n),o.appendChild(c),a.appendChild(o),o.addEventListener("click",()=>{X(o,s)})}))}document.addEventListener("DOMContentLoaded",()=>{fetch("/data/stone.json").then(a=>a.json()).then(a=>{L=a,C(L)}).catch(a=>console.error("Error loading stone data:",a)),document.querySelectorAll("#category-buttons button").forEach(a=>{a.addEventListener("click",()=>{const s=a.dataset.category;if(s==="all")C(L);else{const o=L.filter(n=>n.category===s);C(o)}})})});
