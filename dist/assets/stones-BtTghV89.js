import{p as z}from"./ui-Dyf2XKDH.js";function H(e,u){e.classList.add("expanding"),window.p5Instance&&window.p5Instance.noLoop();const i=e.getBoundingClientRect(),r=i.top+window.scrollY,n=i.left+window.scrollX,p=i.width,l=i.height;e.parentElement,e.nextSibling,e.style.transition="none",e.style.position="fixed",e.style.top=`${r}px`,e.style.left=`${n}px`,e.style.width=`${p}px`,e.style.height=`${l}px`,e.style.margin="0",e.style.transform="none",e.style.zIndex="10000",e.style.willChange="top,left,width,height,transform",document.body.appendChild(e),e.getBoundingClientRect();const d=600;e.style.transition=`top ${d}ms ease, left ${d}ms ease, width ${d}ms ease, height ${d}ms ease, transform ${d}ms ease`,e.style.top="0px",e.style.left="0px",e.style.width="100vw",e.style.height="100vh",e.classList.add("fullscreen");const m=x=>{x.target===e&&e.classList.contains("fullscreen")&&(e.removeEventListener("transitionend",m),e.style.willChange="",S(u))};e.addEventListener("transitionend",m),setTimeout(()=>{document.body.contains(e)&&S(u)},d+50)}function S(e){document.body.innerHTML=`
    <div id="detail-app" style="min-height:100vh; display:flex; flex-direction:column; padding:24px; box-sizing:border-box;">
      <button id="close-detail" aria-label="Close" style="align-self:flex-end; font-size:1.25rem; background:none; border:none; cursor:pointer;">âœ•</button>
      <main style="max-width:960px; width:100%; margin:0 auto;">
        <h1 style="margin:0 0 12px 0;">${e.title}</h1>
        <p style="margin:0 0 8px 0;"><strong>Material:</strong> ${e.material??""}</p>
        <p style="margin:0 0 16px 0;">${e.description??""}</p>
        ${e.image?`<img src="${e.image}" alt="${e.title}" style="max-width:100%; height:auto; display:block;">`:""}
      </main>
    </div>
  `,document.getElementById("close-detail").addEventListener("click",()=>{location.reload()})}document.addEventListener("DOMContentLoaded",()=>{console.log("Fetching:","data/stone.json"),fetch("/data/stone.json").then(e=>e.json()).then(e=>{const u=document.querySelector("#carousel");if(!u){console.error("Carousel element not found");return}u.innerHTML="",e.forEach(i=>{const r=document.createElement("div");r.classList.add("slide");const n=document.createElement("div");n.classList.add("slide-inner");const p=document.createElement("img");p.src=i.image||"",p.alt=i.title||"";const l=document.createElement("p");l.textContent=i.title||"",n.appendChild(p),n.appendChild(l),r.appendChild(n),u.appendChild(r),r.addEventListener("click",()=>{H(r,i)})})}).catch(e=>{console.error("Error loading stone data:",e)})});function Z(e){let u,i=[],r=0,n=0;const p=900;let l=!1;const d=100;let m=0;e.setup=function(){e.noCanvas(),u=document.getElementById("carousel"),i=Array.from(document.querySelectorAll(".slide"));const c=document.getElementById("carousel-container");c.style.perspective="2000px",u.style.transformStyle="preserve-3d",x()?D():X(),e.loop()},e.draw=function(){u.style.transform="rotateX(-15deg) rotateY(-30deg)";const o=i.length*p;r+=n,r=r%o,r<0&&(r+=o),i.forEach((h,M)=>{let y=(M*p-r)%o;y<-p*2&&(y+=o);let b=y-o,C=y+o,f=y;const w=window.innerWidth/2;Math.abs(b-w)<Math.abs(f-w)&&(f=b),Math.abs(C-w)<Math.abs(f-w)&&(f=C);const W=f,k=f*-.5,q=-Math.abs(f)*.2,O=Math.round(W*100)/100,R=Math.round(k*100)/100,j=Math.round(q*100)/100;h.classList.contains("expanding")||h.classList.contains("fullscreen")||(h.style.transform=`
        translateX(${O}px)
        translateY(${R}px)
        translateZ(${j}px)
      `)});const a=Math.abs(n);let g;if(a>25)g=.88;else if(a>10){const h=(a-10)/15,M=h*h*(3-2*h);g=.92+(.88-.92)*M}else if(a>2)g=.92;else if(a>.5){const h=(a-.5)/1.5;g=.94+(.92-.94)*h}else g=.94;n*=g,Math.abs(n)<.005&&(n=0)};function x(){return("ontouchstart"in window||navigator.maxTouchPoints)&&window.innerWidth<=768}function X(){const t=document.querySelector("footer, .footer"),c=document.querySelector("header, .header, .site-header"),s=document.getElementById("carousel-container");s&&(s.addEventListener("mouseenter",()=>{l=!1}),s.addEventListener("mouseleave",()=>{l=!1,n*=.7}),s.addEventListener("wheel",P,{passive:!1}),s.addEventListener("mousedown",Y),s.addEventListener("mouseup",B),s.addEventListener("mousemove",A)),[t,c].forEach(o=>{o&&(o.addEventListener("wheel",a=>{a.stopPropagation(),a.preventDefault()},{passive:!1}),o.addEventListener("mousedown",a=>{a.stopPropagation()}),o.addEventListener("mousemove",a=>{a.stopPropagation()}))})}function D(){const t=document.getElementById("carousel-container");t&&(t.addEventListener("touchstart",I,{passive:!1}),t.addEventListener("touchmove",T,{passive:!1}),t.addEventListener("touchend",L),t.addEventListener("touchcancel",L))}let v=!1;function I(t){t.touches.length===1&&(t.preventDefault(),l=!0,v=!0,m=t.touches[0].clientX,n=0)}function T(t){if(!v||t.touches.length!==1)return;t.preventDefault();const c=t.touches[0].clientX;let o=(c-m)*-1.5;const a=50;o=Math.max(-a,Math.min(a,o)),n=n+(o-n)*.7,m=c}function L(t){v&&(t.preventDefault(),l=!1,v=!1)}let E=0;function P(t){t.preventDefault(),t.stopPropagation();let c=-t.deltaY/8;const s=8;c=Math.max(-s,Math.min(s,c));const o=n+c;n=n+(o-n)*.6,n=Math.max(-d*.8,Math.min(d*.8,n))}function Y(t){t.preventDefault(),t.stopPropagation(),l=!0,E=t.clientX}function B(t){t.preventDefault(),t.stopPropagation(),l=!1}function A(t){if(l){t.preventDefault(),t.stopPropagation();let s=(t.clientX-E)*-1.2;const o=15;s=Math.max(-o,Math.min(o,s)),n=n+(s-n)*.7,n=Math.max(-d*.8,Math.min(d*.8,n)),E=t.clientX}}e.mouseWheel=function(t){return!1},e.mousePressed=function(){return!1},e.mouseReleased=function(){return!1},e.mouseDragged=function(){return!1}}function $(){document.querySelectorAll("#carousel .slide").length>0?window.p5Instance=new z(Z):setTimeout($,50)}document.addEventListener("DOMContentLoaded",$);
